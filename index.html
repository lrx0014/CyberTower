<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Cyber Tower Demo</title>
  <link rel="stylesheet" href="/src/styles/main.css" />
</head>
<body>
  <div id="game-root">
    <div id="phaser"></div>
    <div id="ui">
      <div id="level-name" class="headline"></div>
      <div class="panel">
        <div class="headline">Character</div>
        <div class="stat"><span>Name</span><span id="name">Hero</span></div>
        <div class="stat"><span>HP</span><span id="hp">-</span></div>
        <div class="panel-controls">
          <button id="journal-open" type="button">Traveler Journal</button>
          <button id="arena-open" type="button">Arena</button>
          <button id="workshop-open" type="button">Workshop</button>
        </div>
      </div>

      <div class="panel">
        <div class="headline">Battle Stats</div>
        <div class="stat"><span>ATK</span><span id="atk">-</span></div>
        <div class="stat"><span>DEF</span><span id="def">-</span></div>
      </div>
      <div class="panel">
        <div class="headline">Inventory</div>
        <div id="inventory-list" class="inventory-list"></div>
      </div>
      <div class="panel">
        <div class="msg" id="msg">Welcome to Cyber Tower.</div>
        <div class="btns">
          <button id="reset">Restart</button>
          <button id="hint">Hint</button>
          <button id="debug-toggle" type="button">Debug</button>
        </div>
        <div class="tip">This is just a demo.</div>
      </div>
    </div>
  </div>
  <div id="minigame-overlay" class="mini-game-overlay">
    <div class="mini-game-frame-wrapper">
      <div id="minigame-loading" class="mini-game-loading">Loading battle...</div>
      <iframe
        id="minigame-frame"
        title="Battle Mini Game"
        sandbox="allow-scripts allow-same-origin allow-forms"
      ></iframe>
    </div>
  </div>
  <div id="debug-panel" class="debug-panel hidden">
    <div class="debug-header">
      <span>Debug Panel</span>
      <button id="debug-close" type="button" aria-label="Close debug panel">×</button>
    </div>
    <form id="debug-form" class="debug-form">
      <label class="debug-field" for="debug-hp">
        HP
        <input id="debug-hp" type="number" min="0" step="1" inputmode="numeric" />
      </label>
      <label class="debug-field" for="debug-atk">
        ATK
        <input id="debug-atk" type="number" min="0" step="1" inputmode="numeric" />
      </label>
      <label class="debug-field" for="debug-def">
        DEF
        <input id="debug-def" type="number" min="0" step="1" inputmode="numeric" />
      </label>
      <div class="debug-actions">
        <button type="submit">Apply Stats</button>
      </div>
    </form>
    <div class="debug-custom">
      <label class="debug-field" for="debug-item-gid">
        Item GID
        <input id="debug-item-gid" type="text" placeholder="key_blue" />
      </label>
      <label class="debug-field" for="debug-item-qty">
        Quantity
        <input id="debug-item-qty" type="number" min="1" step="1" value="1" inputmode="numeric" />
      </label>
      <div class="debug-actions">
        <button id="debug-item-apply" type="button">Grant Item</button>
      </div>
    </div>
  </div>

  <div id="player-name-modal" class="player-name-modal hidden" role="dialog" aria-modal="true">
    <form id="player-name-form" class="player-name-card">
      <h2 class="player-name-title">Welcome to Cyber Tower</h2>
      <p class="player-name-subtitle">Choose a name so heroes in the tower know how to address you.</p>
      <label class="player-name-label" for="player-name-input">Character Name</label>
      <input
        id="player-name-input"
        class="player-name-input"
        type="text"
        name="player-name"
        autocomplete="name"
        maxlength="20"
        required
      />
      <div id="player-name-error" class="player-name-error hidden" role="alert">Please enter a name that is 1-20 characters long.</div>
      <div class="player-name-actions">
        <button id="player-name-submit" type="submit">Enter Tutorial</button>
      </div>
    </form>
  </div>

  <div id="dialogue" class="dialogue hidden">
    <div class="dialogue-content">
      <div class="dialogue-header">
        <span id="dialogue-speaker">Speaker</span>
        <button id="dialogue-close" type="button" aria-label="Close dialogue">×</button>
      </div>
      <div id="dialogue-text" class="dialogue-text"></div>
      <div id="dialogue-options" class="dialogue-options hidden"></div>
      <div class="dialogue-controls">
        <button id="dialogue-prev" type="button">Prev</button>
        <button id="dialogue-next" type="button">Next</button>
      </div>
    </div>
  </div>
  <div id="journal-modal" class="journal-modal hidden">
    <div class="journal-dialog">
      <div class="journal-header">
        <span>Traveler Journal</span>
        <button id="journal-close" type="button" aria-label="Close journal">×</button>
      </div>
      <div class="journal-body">
        <nav id="journal-nav" class="journal-nav"></nav>
        <div id="journal-content" class="journal-content"></div>
      </div>
    </div>
  </div>
  <div
    id="arena-modal"
    class="arena-modal hidden"
    role="dialog"
    aria-modal="true"
    aria-labelledby="arena-title"
    tabindex="-1"
  >
    <div class="arena-dialog">
      <div class="arena-header">
        <div class="arena-title-group">
          <span id="arena-title">Cyber Arena (Mock)</span>
          <span id="arena-season" class="arena-season"></span>
        </div>
        <button id="arena-close" type="button" aria-label="Close arena view">×</button>
      </div>
      <div class="arena-body">
        <section class="arena-section">
          <h3 class="arena-section-title">Matchmaking</h3>
          <p class="arena-copy">
            Battle other players to climb the leaderboard. Every match gives arena points based on how you play.
          </p>
          <button id="arena-find-match" type="button" class="arena-find-button">Find Match</button>
          <div id="arena-notice" class="arena-notice hidden" role="alert">
            This feature is still under construction. Arena battles are not available in this demo build.
          </div>
        </section>
        <section class="arena-section">
          <h3 class="arena-section-title">Weekly Rankings</h3>
          <ul id="arena-leaderboard" class="arena-leaderboard" aria-label="Weekly arena rankings"></ul>
        </section>
      </div>
    </div>
  </div>
  <div
    id="workshop-modal"
    class="workshop-modal hidden"
    role="dialog"
    aria-modal="true"
    aria-labelledby="workshop-title"
    tabindex="-1"
  >
    <div class="workshop-dialog">
      <div class="workshop-header">
        <div class="workshop-title-group">
          <span id="workshop-title">Creator Workshop (Mock)</span>
          <span class="workshop-subtitle">Build and share cyber puzzles with the community.</span>
        </div>
        <button id="workshop-close" type="button" aria-label="Close workshop view">×</button>
      </div>
      <div class="workshop-body">
        <section class="workshop-section workshop-summary">
          <h3 class="workshop-section-title">What is the Workshop?</h3>
          <p class="workshop-copy">
            Make community-made challenges with our ready-to-use game styles, no coding needed. Add new questions, answers, and
            short explanations, then send them in for review. Top creators earn special gear and shout-outs.
          </p>
          <div class="workshop-status">Status: Still being built – we can’t publish to the real tower yet.</div>
        </section>
        <section class="workshop-section">
          <h3 class="workshop-section-title">Create a Quiz Variant</h3>
          <form id="workshop-form" class="workshop-form" novalidate>
            <label class="workshop-field">
              <span>Choose Template</span>
              <select id="workshop-template" required>
                <option value="" disabled selected>Select a gameplay template</option>
                <option value="phish-net">Phish Net Defender – phishing recognition</option>
                <option value="quiz-duel">Quiz Duel – cybersecurity trivia</option>
                <option value="privacy-cleanup">Privacy Cleanup – data hygiene</option>
                <option value="mfa-mastermind">MFA Mastermind – authentication choices</option>
              </select>
            </label>
            <div class="workshop-hint">
              The template handles the look and score. You just add the questions.
            </div>
            <div class="workshop-question-builder">
              <h4>Add Questions</h4>
              <p class="workshop-copy">
                Write the question, list possible answers, pick the correct one, and add a quick explanation for the end of the round.
              </p>
              <div id="workshop-questions" class="workshop-questions"></div>
              <button type="button" id="workshop-add-question" class="workshop-secondary">Add Question</button>
            </div>
            <label class="workshop-field">
              <span>Creator Notes (optional)</span>
              <textarea id="workshop-notes" rows="3" placeholder="Share any special tweaks or story ideas."></textarea>
            </label>
            <button type="submit" class="workshop-cta">Send for Review (Mock)</button>
            <div id="workshop-notice" class="workshop-notice hidden" role="alert">
              Thanks! Sharing is turned off in this demo, but we saved your mock idea.
            </div>
          </form>
        </section>
      </div>
    </div>
  </div>
  <div id="mobile-controls" class="mobile-controls">
    <div class="mobile-dpad">
      <span class="mobile-spacer"></span>
      <button class="mobile-btn" type="button" data-direction="up" aria-label="Move up">▲</button>
      <span class="mobile-spacer"></span>
      <button class="mobile-btn" type="button" data-direction="left" aria-label="Move left">◀</button>
      <span class="mobile-spacer"></span>
      <button class="mobile-btn" type="button" data-direction="right" aria-label="Move right">▶</button>
      <span class="mobile-spacer"></span>
      <button class="mobile-btn" type="button" data-direction="down" aria-label="Move down">▼</button>
      <span class="mobile-spacer"></span>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
